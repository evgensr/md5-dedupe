# md5-dedupe

CLI-утилита на Python для удаления дубликатов файлов по MD5 с «сухим» режимом и выбором политики сохранения.

## Возможности
- Рекурсивный обход каталога.
- Быстро: предварительная группировка по размеру снижает число чтений диска.
- Безопасно: «сухой» режим (`--dry-run`) показывает, что будет удалено.
- Гибко: выбор, какой файл сохранять — `first`, `oldest`, `newest`.
- Контроль симлинков: по умолчанию симлинки игнорируются.

## Требования
- Python 3.8+

## Установка
1. Склонируйте репозиторий или скачайте `dedupe_md5.py`.
2. (Опционально) Сделайте файл исполняемым:
   ```bash
   chmod +x dedupe_md5.py
   ```

## Использование
Пробный запуск (ничего не удаляет):
```bash
python3 dedupe_md5.py --root /path/to/dir --keep oldest --dry-run -v
```

Реальное удаление дубликатов:
```bash
python3 dedupe_md5.py --root /path/to/dir --keep oldest
```

Запуск из текущего каталога:
```bash
python3 ./dedupe_md5.py --root . --keep oldest --dry-run -v
```

## Параметры
- `--root PATH` — корневой каталог для рекурсивного обхода (по умолчанию `.`).
- `--keep {first,oldest,newest}` — стратегия, какой файл сохранять внутри группы дубликатов. По умолчанию `first`.
- `--dry-run` — показать, какие файлы были бы удалены, без фактического удаления.
- `--verbose, -v` — подробный вывод.
- `--follow-symlinks` — следовать симлинкам (по умолчанию — нет).

## Как это работает
1. Скрипт собирает все файлы и группирует их по размеру.
2. Для групп с одинаковым размером считает MD5 каждого файла.
3. Внутри каждой хэш-группы выбирает один «эталонный» файл и помечает остальные как дубликаты (удаляет или только показывает в `--dry-run`).

## Предосторожности
- Сначала используйте `--dry-run -v` на больших каталогах.
- Не включайте `--follow-symlinks`, если не уверены, что не попадёте в циклы.
- Думайте о резервном копировании.

## Лицензия
MIT

## Название репозитория
`md5-dedupe`

## Темы (GitHub Topics)
`python` `cli` `md5` `deduplication` `duplicates` `filesystem` `cleanup`
